env:
  global:
    - CIBW_BUILD="cp37-*"
    - CIBW_TEST_REQUIRES="pytest"
    - CIBW_TEST_COMMAND="pytest -x -s -v tests"

matrix:
  include:
    - language: python
      dist: xenial
      sudo: required
      python: "3.7"

git:
  submodules: false

before_install:
  - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
  - git submodule update --init --recursive

install:
  - pip3 install --upgrade cibuildwheel

script:
  - cibuildwheel --output-dir wheelhouse
# branches:
#   only:
#     - prepare
#     - release
